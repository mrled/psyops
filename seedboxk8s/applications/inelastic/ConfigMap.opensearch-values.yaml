apiVersion: v1
kind: ConfigMap
metadata:
  name: opensearch-values
  namespace: inelastic
data:
  values.yaml: |-

    cluserName: inelastic

    singleNode: true

    envFrom:
      - secretRef:
          name: opensearch-env-secrets
    extraEnvs:
      - name: DISABLE_INSTALL_DEMO_CONFIG
        value: "true"

    opensearchJavaOpts: "-Xmx512M -Xms512M"

    config:
      opensearch.yml: |
        cluster.name: inelastic
        discovery.type: single-node
        plugins.security.ssl:
          http:
            enabled: false
          transport:
            pemcert_filepath: /usr/share/opensearch/config/certs/tls.crt
            pemkey_filepath: /usr/share/opensearch/config/certs/tls.key
            pemtrustedcas_filepath: /usr/share/opensearch/config/certs/ca.crt

    extraVolumes:
      - name: opensearch-certs
        secret:
          secretName: opensearch-transport-backing-secret
    extraVolumeMounts:
      - name: opensearch-certs
        mountPath: "/usr/share/opensearch/config/certs"
        readOnly: true

    persistence:
      enabled: true
      # Set to false to disable the `fsgroup-volume` initContainer that will update permissions on the persistent disk.
      enableInitChown: true
      labels:
        # Add default labels for the volumeClaimTemplate of the StatefulSet
        enabled: false
      storageClass: local-slow-storage
      accessModes:
        - ReadWriteOnce
      size: 10Gi
      annotations: {}

    rbac:
      create: true