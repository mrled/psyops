# psyopsOS grub.cfg
# This file is generated by neuralupgrade and will be overwritten on the next update.

#### The next line is used by neuralupgrade to show information about the current configuration.
# neuralupgrade-info: last_updated=20250308-040402 default_boot_label=psyopsOS-A extra_programs=/memtest64.efi,/tcshell.efi
####

# Should be one of the labels defined below
set default="psyopsOS-A"

set timeout=5

insmod all_video
set gfxmode=auto
serial --speed=115200 --unit=0 --word=8 --parity=no --stop=1
terminal_input console serial
terminal_output console serial

# This is slow and uselessly verbose
#set debug=all

menuentry "Welcome to psyopsOS. GRUB configuration last updated: 20250308-040402" {
    echo "Welcome to psyopsOS. GRUB configuration last updated: 20250308-040402"
}
menuentry "----------------------------------------" {
    echo "----------------------------------------"
}


menuentry "psyopsOS-A" {
    search --no-floppy --label psyopsOS-A --set root
    linux /kernel ro psyopsos=psyopsOS-A earlyprintk=dbgp console=tty0 console=ttyS0,115200
    initrd /initramfs
}


menuentry "psyopsOS-B" {
    search --no-floppy --label psyopsOS-B --set root
    linux /kernel ro psyopsos=psyopsOS-B earlyprintk=dbgp console=tty0 console=ttyS0,115200
    initrd /initramfs
}


menuentry "MemTest86 EFI (64-bit)" {
    insmod part_gpt
    insmod fat
    insmod chain
    search --no-floppy --label PSYOPSOSEFI --set root
    chainloader /memtest64.efi
}


menuentry "TianoCore OVMF UEFI Shell (64-bit)" {
    insmod part_gpt
    insmod fat
    insmod chain
    search --no-floppy --label PSYOPSOSEFI --set root
    chainloader /tcshell.efi
}


menuentry "UEFI fwsetup" {
    fwsetup
}

menuentry "Reboot" {
    reboot
}

menuentry "Poweroff" {
    halt
}

menuentry "Exit GRUB" {
    exit
}
