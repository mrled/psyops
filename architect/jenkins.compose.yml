version: "3"
services:

  jenkins:
    image: jenkins/jenkins:lts
    ports:
      - "80:8080"
    volumes:
      - jenkins_home:/var/jenkins_home
    deploy:
      replicas: 1
    command: --httpPort=-1 --httpsPort=8443 --httpsCertificate="/var/jenkins_home/$domain.crt" --httpsPrivateKey="/var/jenkins_home/$domain.key"

  # backupmanager:
  #   image: alpine:latest
  #   volumes:
  #     - jenkins_home:/var/jenkins_home
  #   deploy:
  #     replicas: 1

volumes:
  jenkins_home:
