conn ikev2-newtroy.micahrl.com
    fragmentation=yes
    rekey=no
    dpdaction=clear
    keyexchange=ikev2
    compress=no
    dpddelay=35s

    ike=aes256gcm16-prfsha512-ecp384,aes256-sha2_512-prfsha512-ecp384,aes256-sha2_384-prfsha384-ecp384!
    esp=aes256gcm16-ecp384,aes256-sha2_512-prfsha512-ecp384!

    right=newtroy.micahrl.com
    rightid=newtroy.micahrl.com
    rightsubnet=0.0.0.0/0
    rightauth=pubkey

    # Change from Algo-generated version: allow any IP address
    # Upstream Algo only uses IP addresses and sets right=W.X.Y.Z,
    # but my fork can configure a domain name
    rightallowany=yes

    # Change from Algo-generated version: only use VPN for VPN hosts
    # aka "split-tunneling"
    # This means ONLY pass traffic destined for this network over the VPN
    rightsubnet=10.19.48.0/24

    # Change from Algo-generated version: restart dead peers
    dpdaction=restart

    # Change from Algo-generated version: keep trying to connect to the server forever
    keyingtries=%forever

    leftsourceip=%config
    leftauth=pubkey
    leftid=gw1
    leftcert=gw1.crt
    leftfirewall=yes
    left=%defaultroute

    # We don't use auto=route because it doesn't work with leftsourceip=%config
    # We use dbdaction=restart, keyingtries=%forever, and auto=start instead
    # See https://wiki.strongswan.org/issues/2162
    auto=start
